<div class="top-fixed-menubar">
    <p-menubar [model]="items">
        <!-- Start (Logo or App Icon) -->
        <ng-template #start>
            <img src="assets/vk-logo.jpg" width="40" height="40" alt="logo" />
        </ng-template>

        <!-- Menu Items -->
        <ng-template #item let-item let-root="root">
            <a pRipple class="flex items-center p-menubar-item-link">
                <i *ngIf="item.icon" class="pi" [ngClass]="item.icon" style="margin-right: 8px"></i>
                <span>{{ item.label }}</span>
                <p-badge *ngIf="item.badge" [ngClass]="{ 'ml-auto': !root, 'ml-2': root }" [value]="item.badge" />
                <i *ngIf="item.items" class="pi" [ngClass]="root ? 'pi-angle-down' : 'pi-angle-right'"
                    style="margin-left: auto"></i>
            </a>
        </ng-template>

        <ng-template #end>
            <div class="flex items-center gap-2">
                <input type="text" pInputText placeholder="Search" class="w-36" />

                <!-- Avatar Click Trigger -->
                <p-avatar image="assets/vikki.jpg" shape="circle" size="large" styleClass="cursor-pointer"
                    (click)="showMenu($event)">
                </p-avatar>

                <p-menu #menu [model]="profileItems" [popup]="true"></p-menu>

            </div>
        </ng-template>


    </p-menubar>
</div>


<p-dialog header="Add New Employee" [(visible)]="displayDialog" [modal]="true" [style]="{width: '50vw'}">

  <form [formGroup]="employeeForm" (ngSubmit)="onSubmit()" class="p-fluid">

    <div class="p-field">
      <label for="firstName">First Name</label>
      <input id="firstName" type="text" pInputText formControlName="firstName" />
    </div>

    <div class="p-field">
      <label for="lastName">Last Name</label>
      <input id="lastName" type="text" pInputText formControlName="lastName" />
    </div>

    <div class="p-field">
      <label for="emailId">Email</label>
      <input id="emailId" type="text" pInputText formControlName="emailId" />
    </div>

    <div class="p-field">
      <label for="address">Address</label>
      <input id="address" type="text" pInputText formControlName="address" />
    </div>
    <div class="p-field">
      <label for="phoneNumber">Phone Number</label>
      <input id="phoneNumber" type="text" pInputText formControlName="phoneNumber" />
    </div>
    <div class="p-field">
      <label for="reportingManager">Reporting Manager</label>
      <input id="reportingManager" type="text" pInputText formControlName="reportingManager" />
    </div>

    <div class="p-field">
      <label for="designation">Designation</label>
      <input id="designation" type="text" pInputText formControlName="designation" />
    </div>
    
    <div class="p-field">
      <label for="maritalStatus">Marital Status</label>
      <input id="maritalStatus" type="text" pInputText formControlName="maritalStatus" />
    </div>
    
    <div class="p-field">
      <label for="nationality">Nationality</label>
      <input id="nationality" type="text" pInputText formControlName="nationality" />
    </div>

    <div class="p-field">
      <label for="experience">Experience</label>
      <input id="experience" type="number" pInputText formControlName="experience" />
    </div>

    <div class="p-field">
      <label for="salary">Salary</label>
      <input id="salary" type="number" pInputText formControlName="salary" />
    </div>

    <div class="p-field">
      <label for="skills">Skills</label>
      <input id="skills" type="text" pInputText formControlName="skills" />
    </div>

    <div class="p-field">
      <label for="status">Status</label>
      <input id="status" type="text" pInputText formControlName="status" />
    </div>

    <div class="p-field">
      <label for="zipCode">Zipcode</label>
      <input id="zipCode" type="text" pInputText formControlName="zipCode" />
    </div>

    <div class="p-field">
      <label for="job">Job</label>
      <input id="job" type="text" pInputText formControlName="job" />
    </div>

    <div class="p-field">
      <label for="gender">Gender</label>
      <p-dropdown [options]="['Male', 'Female', 'Other']" formControlName="gender"></p-dropdown>
    </div>

    <div class="p-field">
      <label for="dateOfBirth">Date of Birth</label>
      <p-calendar formControlName="dateOfBirth" dateFormat="yy-mm-dd" [showIcon]="true"></p-calendar>
    </div>

    <div class="p-field">
      <label for="dateOfJoining">Date of Joining</label>
      <p-calendar formControlName="dateOfJoining" dateFormat="yy-mm-dd" [showIcon]="true"></p-calendar>
    </div>

    <div class="p-field">
      <label>Country</label>
      <p-dropdown [options]="countries" optionLabel="name" formControlName="country"
                  (onChange)="onCountryChange($event.value)"></p-dropdown>
    </div>

    <div class="p-field">
      <label>State</label>
      <p-dropdown [options]="states" optionLabel="name" formControlName="state"
                  (onChange)="onStateChange($event.value)"></p-dropdown>
    </div>

    <div class="p-field">
      <label>City</label>
      <p-dropdown [options]="cities" formControlName="city"></p-dropdown>
    </div>

    <div class="p-field">
      <label for="profileImage">Profile Image</label>
      <input type="file" (change)="onFileSelect($event, 'profile')" />
    </div>

    <div class="p-field">
      <label for="resume">Resume</label>
      <input type="file" (change)="onFileSelect($event, 'resume')" />
    </div>

    <div class="p-d-flex p-jc-end">
      <button type="submit" pButton label="Save" class="p-button-sm p-button-primary"></button>
      <button type="button" pButton label="Cancel" class="p-button-sm p-button-secondary" (click)="displayDialog = false"></button>
    </div>

  </form>

</p-dialog>



<p-table [value]="employees" [paginator]="true" [rows]="10" [scrollable]="true" scrollHeight="500px">
  
  <ng-template pTemplate="header">
    <tr>
      <th>Employee Code</th>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Email</th>
      <th>Phone</th>
      <th>Gender</th>
      <th>DOB</th>
      <th>Marital Status</th>
      <th>Nationality</th>
      <th>Country</th>
      <th>State</th>
      <th>City</th>
      <th>Zipcode</th>
      <th>Address</th>
      <th>Designation</th>
      <th>Job</th>
      <th>Date of Joining</th>
      <th>Experience</th>
      <th>Salary</th>
      <th>Manager</th>
      <th>Status</th>
      <th>Skills</th>
      <th>Profile Image</th>
      <th>Resume</th>
    </tr>
  </ng-template>

  <ng-template pTemplate="body" let-employee>
    <tr>
      <td>{{ employee.employeeCode }}</td>
      <td>{{ employee.firstName }}</td>
      <td>{{ employee.lastName }}</td>
      <td>{{ employee.emailId }}</td>
      <td>{{ employee.phoneNumber }}</td>
      <td>{{ employee.gender }}</td>
      <td>{{ employee.dateOfBirth | date:'dd/MM/yyyy' }}</td>
      <td>{{ employee.maritalStatus }}</td>
      <td>{{ employee.nationality }}</td>
      <td>{{ employee.country }}</td>
      <td>{{ employee.state }}</td>
      <td>{{ employee.city }}</td>
      <td>{{ employee.zipcode }}</td>
      <td>{{ employee.address }}</td>
      <td>{{ employee.designation }}</td>
      <td>{{ employee.job }}</td>
      <td>{{ employee.dateOfJoining | date:'dd/MM/yyyy' }}</td>
      <td>{{ employee.experience }}</td>
      <td>{{ employee.salary }}</td>
      <td>{{ employee.reportingManager }}</td>
      <td>{{ employee.status }}</td>
      <td>{{ employee.skills }}</td>
      <td>
        <img *ngIf="employee.profileImage" [src]="'http://localhost:8080/' + employee.profileImage" width="50" height="50" style="border-radius: 50%;" />
      </td>
      <td>
        <a *ngIf="employee.resume" [href]="'http://localhost:8080/' + employee.resume" target="_blank">Download</a>
      </td>
    </tr>
  </ng-template>

</p-table>
